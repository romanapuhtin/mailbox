(window.webpackJsonpmailbox=window.webpackJsonpmailbox||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(8),o=a.n(r),l=(a(16),a(10)),i=a(9),c=a(1),d=a(2),u=a(4),m=a(3),p=a(5),f=(a(17),a(6)),h=(a(18),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFilterTextChange=a.handleFilterTextChange.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"handleFilterTextChange",value:function(e){this.props.filterTextChange(e.target.value)}},{key:"render",value:function(){return n.a.createElement("div",{className:"searchbox"},n.a.createElement("input",{type:"text",name:"search",placeholder:"Search mail...",value:this.props.filterText,onChange:this.handleFilterTextChange}))}}]),t}(s.Component)),g=(a(19),function(e){function t(){var e,a;Object(c.a)(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).handleSetCurrentFolderID=function(e){a.props.setCurrentFolderID(e)},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"folder-nav"},this.props.folders.map(function(t){return n.a.createElement("div",{key:t.id,className:"folder-ntf".concat(e.props.currentFolderID===t.id?" current":""),onClick:function(){return e.handleSetCurrentFolderID(t.id)}},n.a.createElement("span",{className:"folder-ntf__name"},t.name),n.a.createElement("span",{className:"folder-ntf__unread"},t.messages.unread>0&&t.messages.unread),n.a.createElement("span",{className:"folder-ntf__slash"},t.messages.unread>0&&"/"),n.a.createElement("span",{className:"folder-ntf__total"},t.messages.total>0&&t.messages.total))}))}}]),t}(s.Component)),b=(a(20),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleClickFilters=function(e){a.props.isMessageSelected?a.setState({isSelected:!0}):a.setState({isSelected:!1}),a.props.selectMessages(e);var t=a.selectContainer.current.className;a.selectContainer.current.className="invisible",setTimeout(function(){a.selectContainer.current.className=t},1e3)},a.handleChangeCheckbox=function(){a.props.setCheckbox(!a.props.stateToolbarComponents.checkboxIsChecked),a.props.stateToolbarComponents.checkboxIsChecked?a.props.selectMessages("NONE"):a.props.selectMessages("ALL")},a.handleClickMoveto=function(e){a.props.moveMessages(e),a.props.setCheckbox(!1);var t=a.movetoContainer.current.className;a.movetoContainer.current.className="invisible",setTimeout(function(){a.movetoContainer.current.className=t},1e3)},a.selectContainer=n.a.createRef(),a.movetoContainer=n.a.createRef(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.filterNames.map(function(t){return n.a.createElement("span",{key:t,onClick:function(){return e.handleClickFilters(t)}},t)}),a=this.props.folderNames.map(function(t){return n.a.createElement("span",{key:t,onClick:function(){return e.handleClickMoveto(t)}},t)});return n.a.createElement("div",{className:this.props.stateToolbarComponents.close?"reading-pane-tlbr center":"reading-pane-tlbr"},n.a.createElement("div",{onClick:function(){return e.props.messageOpenToolbar("close")},className:this.props.stateToolbarComponents.close?"reading-pane-tlbr-close":"invisible"},n.a.createElement("i",{className:"material-icons"},"clear"),n.a.createElement("span",null,"  CLOSE")),n.a.createElement("div",{className:this.props.stateToolbarComponents.select?"checkbox-btn-dropdown":"invisible"},n.a.createElement("label",{className:"checkbox"},n.a.createElement("input",{disabled:!(this.props.displayedMessagesLength>0),type:"checkbox",checked:this.props.stateToolbarComponents.checkboxIsChecked,onChange:this.handleChangeCheckbox}),n.a.createElement("span",{className:"checkmark"})),n.a.createElement("div",{className:"btn-dropdown"},n.a.createElement("button",null,n.a.createElement("i",{className:"material-icons"},"arrow_drop_down")),n.a.createElement("div",{className:"dropdown",ref:this.selectContainer},t))),n.a.createElement("div",{className:this.props.stateToolbarComponents.move?"move-to":"invisible"},n.a.createElement("i",{className:"material-icons"},"folder_open"),n.a.createElement("span",null," MOVE TO"),n.a.createElement("div",{className:"dropdown",ref:this.movetoContainer},a)))}}]),t}(s.Component)),v=(a(21),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).\u0441lickOnTableCheckBox=function(e,t){e.stopPropagation(),a.props.selectMessage(t)},a.state={message:{},isDisplayMessageBody:!1},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"onChange",value:function(){}},{key:"componentDidUpdate",value:function(){var e=this.state.isDisplayMessageBody,t=this.props,a=t.isOpenMessage,s=t.messageOpenToolbar;!a&&e&&(this.setState({isDisplayMessageBody:!1,message:void 0}),s("open"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.message,r=t.isDisplayMessageBody,o=this.props.messages.map(function(t,a){return n.a.createElement(s.Fragment,{key:a},n.a.createElement("tr",{key:t.id,onClick:function(){e.setState({message:t,isDisplayMessageBody:!0}),e.props.toolbarOps("READ_MESSAGE"),e.props.openMessage("OPEN",t.id)}},n.a.createElement("td",{className:"td1"},n.a.createElement("input",{type:"checkbox",key:t.id,checked:t.isSelected,onChange:function(){return e.onChange()},onClick:function(a){return e.\u0441lickOnTableCheckBox(a,t.id)}})),n.a.createElement("td",{className:"td2",style:t.isRead?{fontWeight:"normal"}:{fontWeight:"bold"}},t.from),n.a.createElement("td",{className:"td3",style:t.isRead?{fontWeight:"normal"}:{fontWeight:"bold"}},t.subject)))});return n.a.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},n.a.createElement("div",{className:"reading-pane"},n.a.createElement("div",{className:"message-pane"},n.a.createElement("table",{id:"myTable"},n.a.createElement("tbody",null,o)))),!!r&&this.props.render(a))}}]),t}(s.Component)),y=(a(22),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t=this.props.openMessage;if(void 0===t)return n.a.createElement("div",null);try{e=null!==t.body?-1!==t.body.indexOf("redd.it")?-1!==t.body.indexOf("jpg")||-1!==t.body.indexOf("png")||-1!==t.body.indexOf("gif")?n.a.createElement("img",{className:"message-img",src:t.body,style:{maxWidth:"1000px"},alt:"Animal"}):n.a.createElement("video",{style:{maxWidth:"1000px",minWidth:"480px"},controls:!0},n.a.createElement("source",{src:t.body,type:"video/mp4"}),"Your browser does not support HTML5 video."):n.a.createElement("span",{style:{padding:"28px"}},n.a.createElement("a",{href:t.body,target:"_blank",rel:"noopener noreferrer"},"View post")):n.a.createElement("div",null)}catch(a){e=n.a.createElement("div",null)}return n.a.createElement("div",{className:"message-cntr"},n.a.createElement("div",{className:"message-cntr-scroll"},n.a.createElement("div",{className:"message-tlbr"},n.a.createElement("span",{style:{padding:"10px"}},"From: ",this.props.openMessage.from),n.a.createElement("span",{style:{padding:"10px"}},"Subject: ",this.props.openMessage.subject)),n.a.createElement("div",{className:"message"},e)))}}]),t}(s.Component));function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var C="https://www.reddit.com/r/aww/new.json",O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).setToolbarCheckboxState=function(e){a.setState(function(t){return{stateToolbarComponents:E({},t.stateToolbarComponents,{},t.stateToolbarComponents.checkboxIsChecked=e)}})},a.filterTextChange=function(e){a.setState({filterText:e})},a.setCurrentFolderID=function(e){a.setState({currentFolderID:e})},a.selectMessage=function(e){a.setState(function(t){return t.displayedMessages.forEach(function(t){t.id===e&&(t.isSelected=!t.isSelected)}),{displayedMessages:t.displayedMessages}})},a.selectMessages=function(e){a.setState(function(t){switch(e.toUpperCase()){case"ALL":return t.displayedMessages.forEach(function(e){e.folderID===t.currentFolderID&&(e.isSelected=!0)}),a.setToolbarCheckboxState(!0),{displayedMessages:t.displayedMessages};case"NONE":return t.displayedMessages.forEach(function(e){e.folderID===t.currentFolderID&&(e.isSelected=!1)}),a.setToolbarCheckboxState(!1),{displayedMessages:t.displayedMessages};case"READ":return t.displayedMessages.forEach(function(e){e.folderID===t.currentFolderID&&(!0===e.isRead?e.isSelected=!0:e.isSelected=!1)}),a.setToolbarCheckboxState(!1),{displayedMessages:t.displayedMessages};case"UNREAD":return t.displayedMessages.forEach(function(e){e.folderID===t.currentFolderID&&(!1===e.isRead?e.isSelected=!0:e.isSelected=!1)}),a.setToolbarCheckboxState(!1),{displayedMessages:t.displayedMessages};case"UNSELECT_ALL":return t.displayedMessages.forEach(function(e){e.isSelected=!1}),{displayedMessages:t.displayedMessages}}})},a.moveMessages=function(e){a.setState(function(t){var a=!0,s=!1,n=void 0;try{for(var r,o=t.displayedMessages[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var l=r.value;if(l.isSelected){var i=!0,c=!1,d=void 0;try{for(var u,m=t.storedMessages[Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var p=u.value;if(l.id===p.id){var f=!0,h=!1,g=void 0;try{for(var b,v=t.folders[Symbol.iterator]();!(f=(b=v.next()).done);f=!0){var y=b.value;y.name===e&&(p.folderID=y.id)}}catch(M){h=!0,g=M}finally{try{f||null==v.return||v.return()}finally{if(h)throw g}}}}}catch(M){c=!0,d=M}finally{try{i||null==m.return||m.return()}finally{if(c)throw d}}}}}catch(M){s=!0,n=M}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return{storedMessages:t.storedMessages}}),a.selectMessages("UNSELECT_ALL"),a.updateFolders(),a.updateDisplayedMessages()},a.toolbarOps=function(e){switch(e.toLowerCase()){case"read_message":a.setState({stateToolbarComponents:{checkboxIsChecked:!1,close:!0,select:!1,move:!1}});break;case"list_messages":a.setState({stateToolbarComponents:{checkboxIsChecked:!1,close:!1,select:!0,move:!0}})}},a.messageOpenToolbar=function(e){switch(e.toLowerCase()){case"close":a.setState({nextIsOpenedMessage:!1});break;case"open":a.setState({nextIsOpenedMessage:!0}),a.toolbarOps("list_messages")}},a.openMessage=function(e,t){a.setState(function(a){if("open"===e.toLowerCase()){var s=!0,n=!1,r=void 0;try{for(var o,l=a.storedMessages[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var i=o.value;t===i.id&&(i.isRead=!0)}}catch(c){n=!0,r=c}finally{try{s||null==l.return||l.return()}finally{if(n)throw r}}return{isOpenedMessage:!0,currentMessageID:t,storedMessages:a.storedMessages}}return{isOpenedMessage:!1,currentMessageID:t}}),a.updateFolders(),a.updateDisplayedMessages()},a.updateFolders=function(){a.setState(function(e){e.folders.forEach(function(e){e.messages.total=0,e.messages.unread=0});var t=!0,a=!1,s=void 0;try{for(var n,r=e.storedMessages[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var o=n.value;if(!1===o.isRead){var l=!0,i=!1,c=void 0;try{for(var d,u=e.folders[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){var m=d.value;if(o.folderID===m.id){m.messages.unread+=1,m.messages.total+=1;break}}}catch(y){i=!0,c=y}finally{try{l||null==u.return||u.return()}finally{if(i)throw c}}}else{var p=!0,f=!1,h=void 0;try{for(var g,b=e.folders[Symbol.iterator]();!(p=(g=b.next()).done);p=!0){var v=g.value;if(o.folderID===v.id){v.messages.total+=1;break}}}catch(y){f=!0,h=y}finally{try{p||null==b.return||b.return()}finally{if(f)throw h}}}}}catch(y){a=!0,s=y}finally{try{t||null==r.return||r.return()}finally{if(a)throw s}}return{folders:e.folders}})},a.state={error:null,isLoaded:!1,result:null,storedMessages:[],displayedMessages:[],filterText:"",isMessageSelected:!1,folders:a.props.schemaFolders,currentFolderID:0,stateToolbarComponents:{checkboxIsChecked:!1,close:!1,select:!0,move:!0},isOpenedMessage:!1,currentMessageID:null,nextIsOpenedMessage:!0},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"updateDisplayedMessages",value:function(){this.setState(function(e){var t=e.storedMessages,a=e.filterText,s=(e.displayedMessages,e.currentFolderID);return{displayedMessages:t.filter(function(e){return(-1!==e.subject.toLowerCase().indexOf(a)||-1!==e.from.toLowerCase().indexOf(a))&&(e.folderID===s&&e)})}})}},{key:"componentDidUpdate",value:function(e,t,a){t.filterText!==this.state.filterText&&this.updateDisplayedMessages(),t.currentFolderID!==this.state.currentFolderID&&(this.updateDisplayedMessages(),this.selectMessages("UNSELECT_ALL"))}},{key:"updateStoredMessages",value:function(e){if(0===this.state.storedMessages.length)this.setState({storedMessages:e.data.children.map(function(e,t){var a=null;try{a=-1!==e.data.domain.indexOf("redd.it")&&e.data.is_video?e.data.media.reddit_video.fallback_url:e.data.url}catch(s){a=null}return{id:e.data.id,folderID:0,from:"".concat(e.data.author.toLowerCase(),"@").concat(e.data.domain),created_utc:"".concat(e.data.created_utc,"000"),subject:e.data.title,body:a,isSelected:!1,isRead:!1}})});else{var t=this.state.storedMessages,a=[];e.data.children.forEach(function(e){var s=!1,n=!0,r=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){if(l.value.id===e.data.id){s=!0;break}}}catch(d){r=!0,o=d}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}if(!s){var c=null;try{c=-1!==e.data.domain.indexOf("redd.it")&&e.data.is_video?e.data.media.reddit_video.fallback_url:e.data.url}catch(d){c=null}a.push({id:e.data.id,folderID:0,from:"".concat(e.data.author.toLowerCase(),"@").concat(e.data.domain),created_utc:"".concat(e.data.created_utc,"000"),subject:e.data.title,body:c,isSelected:!1,isRead:!1}),s=!1}}),a.length&&this.setState({storedMessages:[].concat(a,Object(l.a)(t))})}}},{key:"fetchData",value:function(e){var t=this;fetch(e).then(function(e){return e.json()}).then(function(e){t.updateStoredMessages(e),t.updateDisplayedMessages(),t.updateFolders(),t.setState({isLoaded:!0})},function(e){t.setState({isLoaded:!0,error:e})})}},{key:"componentDidMount",value:function(){var e=this;this.fetchData(C),this.timerID=setInterval(function(){return e.fetchData(C)},1e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID),this.timerID=null}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,s=t.isLoaded;if(a)return n.a.createElement("div",null,"Error: ",a.message);if(s){var r=this.state,o=(r.storedMessages,r.displayedMessages,[]);this.state.isOpenedMessage?(o=(o=this.state.displayedMessages.filter(function(t){return t.id===e.state.currentMessageID}))[0],n.a.createElement(y,{openMessage:o})):n.a.createElement("div",null);var l=[];this.state.folders.forEach(function(t){t.id!==e.state.currentFolderID&&l.push(t.name)});return n.a.createElement("div",{className:"main"},n.a.createElement("header",null,n.a.createElement("div",{className:"head"},n.a.createElement(h,{filterText:this.state.filterText,filterTextChange:this.filterTextChange}))),n.a.createElement("section",null,n.a.createElement("div",{className:"body"},n.a.createElement("div",{className:"side"},n.a.createElement(g,{folders:this.state.folders,setCurrentFolderID:this.setCurrentFolderID,currentFolderID:this.state.currentFolderID})),n.a.createElement("div",{className:"wall"},n.a.createElement("div",{className:"wall-toolbar"},n.a.createElement(b,{setCheckbox:this.setToolbarCheckboxState,folderNames:l,filterNames:["All","None","Read","Unread"],selectMessages:this.selectMessages,moveMessages:this.moveMessages,stateToolbarComponents:this.state.stateToolbarComponents,messageOpenToolbar:this.messageOpenToolbar,displayedMessagesLength:this.state.displayedMessages.length})),n.a.createElement("div",{className:"wall-feed"},n.a.createElement(v,{messages:this.state.displayedMessages,selectMessage:this.selectMessage,openMessage:this.openMessage,toolbarOps:this.toolbarOps,messageOpenToolbar:this.messageOpenToolbar,isOpenMessage:this.state.nextIsOpenedMessage,render:function(e){return n.a.createElement(y,{openMessage:e})}}))))))}return n.a.createElement("div",null,"Loading...")}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(O,{schemaFolders:[{id:0,name:"Inbox",messages:{total:0,unread:0}},{id:10001,name:"Sent",messages:{total:0,unread:0}},{id:10002,name:"Spam",messages:{total:0,unread:0}},{id:10003,name:"Trash",messages:{total:0,unread:0}}]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.492e6b20.chunk.js.map